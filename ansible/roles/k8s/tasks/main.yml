---

- name: Prerequisites step
  ansible.builtin.import_tasks: prerequisites.yml

- name: Disable swap
  ansible.builtin.import_tasks: disable_swap.yml

- name: Manage local hosts file
  ansible.builtin.import_tasks: local_hosts_file.yml

- name: Enable kubeproxy as systemd unit
  when:
    - kubernetes_node_type == 'admin'
    - is_cloud == '0'
  ansible.builtin.import_tasks: kubeproxy_service.yml

- name: Kubernetes install via kubeadm
  ansible.builtin.import_tasks: kubeadm.yml

- name: Add metrics addon
  ansible.builtin.import_tasks: metrics.yml

- name: Openstack provider
  when:
    - kubernetes_node_type == 'admin'
    - is_cloud == '1'
  ansible.builtin.import_tasks: openstack_provider.yml

...
